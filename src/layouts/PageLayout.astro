---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.vue';
import Footer from '../components/Footer.vue';

const { title, global, profile, seoDescription, seoImage } = Astro.props;

const isHome = () => {
    return Astro.url.pathname === '/';
};
const pageTitle = () => {
    if (isHome()) {
        return global?.title;
    }
    return Astro.props.title;
};
const getPathArray = (): string[] => {
    const path = Astro.url.pathname;

    if (isHome()) {
        return ['/'];
    }

    const paths: string[] = [];
    const segments = path.split('/').filter(Boolean);

    let currentPath = '';

    for (const segment of segments) {
        currentPath += `/${segment}`;
        paths.push(currentPath);
    }

    if (path !== '/') {
        paths.unshift('/');
    }

    return paths;
};
---

<!DOCTYPE html>
<html lang='en'>
    <head>
        <BaseHead
            title={title}
            seoDescription={seoDescription}
            seoImage={seoImage}
        />
    </head>
    <body>
        <div aria-hidden='true' class="fixed w-screen top-0 h-[1rem] z-[2] bg-primary-yellow"></div>
        <Header
            client:only
            name={profile?.name}
            title={pageTitle()}
            path={getPathArray()}
            isHome={isHome()}
        />
        <main>
            <slot />
        </main>
        <Footer
            linkedin={profile?.linkedin}
            github={profile?.github}
            email={profile?.email}
        />
    </body>
</html>
